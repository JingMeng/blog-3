# 数据库设计的一些原则

根据现在项目的情况，之后肯定会使用sqlite作为本地数据库。

这里记录一些sqlite相关的比较好的文章或者原理

[sqlite原理](http://huili.github.io/)
[关系型数据库原理](http://blog.jobbole.com/100349/)

## 存储

使用递增的整数型自增主键虽然会在性能或者可迁移性上有良好的效果，不过在实际的使用上会出现需要查询非主键的情况。在这种情况下的查询效率其实不是特别好。所以一般情况下采用自定义的自增主键或者通过对数据进行位运算之类的方式做出主键可能是一种较好的方式。

## 查询

查询主键肯定比查询非主键要快，那么就意味着如果可以的话，尽量避免对非主键进行查询的操作。

也许我们可以通过将数据预先加载到内存中并建立映射关系的方式来处理，这样会提高查询速度。

## 替换方案

realm这种非关系型数据库可能是以后的一种开发方案。看上去这个东西不需要做序列化或者反序列化的东西，而是通过文件映射的方式直接读取到内存里面，这样就不需要复杂的语义分析等等。当然这种方式会是比较具有毁灭性的，会影响到整个数据的设计和思维方式的转变，所以要么就一开始就使用，要么就先别想这个玩意了。

非常悲剧的是 这个东西是没有c++ API的，虽然底层是c++写的。也就是说，除了像Qt这种自带js引擎的，基于其他开发的话估计是不能使用realm的。